/*! For license information please see turnkey.bundle.js.LICENSE.txt */
(()=>{var t,e,i,r,n={31:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>s});const r=i(442).sc;var n=i(307);const s=function(t){function e(e){var i=e.slice(0,-4),r=e.slice(-4),n=t(i);if(!(r[0]^n[0]|r[1]^n[1]|r[2]^n[2]|r[3]^n[3]))return i}return{encode:function(e){var i=Uint8Array.from(e),r=t(i),s=i.length+4,a=new Uint8Array(s);return a.set(i,0),a.set(r.subarray(0,4),i.length),n.default.encode(a)},decode:function(t){var i=e(n.default.decode(t));if(null==i)throw new Error("Invalid checksum");return i},decodeUnsafe:function(t){var i=n.default.decodeUnsafe(t);if(null!=i)return e(i)}}}(function(t){return r(r(t))})},251:(t,e)=>{e.read=function(t,e,i,r,n){var s,a,o=8*n-r-1,u=(1<<o)-1,c=u>>1,h=-7,l=i?n-1:0,p=i?-1:1,f=t[e+l];for(l+=p,s=f&(1<<-h)-1,f>>=-h,h+=o;h>0;s=256*s+t[e+l],l+=p,h-=8);for(a=s&(1<<-h)-1,s>>=-h,h+=r;h>0;a=256*a+t[e+l],l+=p,h-=8);if(0===s)s=1-c;else{if(s===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),s-=c}return(f?-1:1)*a*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var a,o,u,c=8*s-n-1,h=(1<<c)-1,l=h>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=h):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?p/u:p*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=h?(o=0,a=h):a+l>=1?(o=(e*u-1)*Math.pow(2,n),a+=l):(o=e*Math.pow(2,l-1)*Math.pow(2,n),a=0));n>=8;t[i+f]=255&o,f+=d,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;t[i+f]=255&a,f+=d,a/=256,c-=8);t[i+f-d]|=128*y}},271:(t,e,i)=>{"use strict";i.d(e,{B4:()=>d,CQ:()=>I,CW:()=>w,Ei:()=>p,F8:()=>E,P5:()=>f,TH:()=>A,Vl:()=>b,Vr:()=>_,WM:()=>y,WQ:()=>g,im:()=>m,jm:()=>u,lD:()=>a,qh:()=>l,rE:()=>c,ry:()=>h,xn:()=>o});const r=BigInt(2**32-1),n=BigInt(32);function s(t,e=!1){return e?{h:Number(t&r),l:Number(t>>n&r)}:{h:0|Number(t>>n&r),l:0|Number(t&r)}}function a(t,e=!1){const i=t.length;let r=new Uint32Array(i),n=new Uint32Array(i);for(let a=0;a<i;a++){const{h:i,l:o}=s(t[a],e);[r[a],n[a]]=[i,o]}return[r,n]}const o=(t,e,i)=>t>>>i,u=(t,e,i)=>t<<32-i|e>>>i,c=(t,e,i)=>t>>>i|e<<32-i,h=(t,e,i)=>t<<32-i|e>>>i,l=(t,e,i)=>t<<64-i|e>>>i-32,p=(t,e,i)=>t>>>i-32|e<<64-i,f=(t,e,i)=>t<<i|e>>>32-i,d=(t,e,i)=>e<<i|t>>>32-i,y=(t,e,i)=>e<<i-32|t>>>64-i,m=(t,e,i)=>t<<i-32|e>>>64-i;function g(t,e,i,r){const n=(e>>>0)+(r>>>0);return{h:t+i+(n/2**32|0)|0,l:0|n}}const b=(t,e,i)=>(t>>>0)+(e>>>0)+(i>>>0),_=(t,e,i,r)=>e+i+r+(t/2**32|0)|0,w=(t,e,i,r)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0),I=(t,e,i,r,n)=>e+i+r+n+(t/2**32|0)|0,E=(t,e,i,r,n)=>(t>>>0)+(e>>>0)+(i>>>0)+(r>>>0)+(n>>>0),A=(t,e,i,r,n,s)=>e+i+r+n+s+(t/2**32|0)|0},287:(t,e,i)=>{"use strict";const r=i(526),n=i(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=u,e.IS=50;const a=2147483647;function o(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,u.prototype),e}function u(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,i)}function c(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!u.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|y(t,e);let r=o(i);const n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(G(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return p(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(G(t,ArrayBuffer)||t&&G(t.buffer,ArrayBuffer))return f(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(G(t,SharedArrayBuffer)||t&&G(t.buffer,SharedArrayBuffer)))return f(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return u.from(r,e,i);const n=function(t){if(u.isBuffer(t)){const e=0|d(t.length),i=o(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||$(t.length)?o(0):p(t):"Buffer"===t.type&&Array.isArray(t.data)?p(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return u.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return h(t),o(t<0?0:0|d(t))}function p(t){const e=t.length<0?0:0|d(t.length),i=o(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function f(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,u.prototype),r}function d(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function y(t,e){if(u.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||G(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return W(t).length;default:if(n)return r?-1:J(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,i);case"utf8":case"utf-8":return S(this,e,i);case"ascii":return O(this,e,i);case"latin1":case"binary":return U(this,e,i);case"base64":return v(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function b(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),$(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:_(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):_(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function _(t,e,i,r,n){let s,a=1,o=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,o/=2,u/=2,i/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(n){let r=-1;for(s=i;s<o;s++)if(c(t,s)===c(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===u)return r*a}else-1!==r&&(s-=s-r),r=-1}else for(i+u>o&&(i=o-u),s=i;s>=0;s--){let i=!0;for(let r=0;r<u;r++)if(c(t,s+r)!==c(e,r)){i=!1;break}if(i)return s}return-1}function w(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=e.length;let a;for(r>s/2&&(r=s/2),a=0;a<r;++a){const r=parseInt(e.substr(2*a,2),16);if($(r))return a;t[i+a]=r}return a}function I(t,e,i,r){return j(J(e,t.length-i),t,i,r)}function E(t,e,i,r){return j(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function A(t,e,i,r){return j(W(e),t,i,r)}function T(t,e,i,r){return j(function(t,e){let i,r,n;const s=[];for(let a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function v(t,e,i){return 0===e&&i===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,i))}function S(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let s=null,a=e>239?4:e>223?3:e>191?2:1;if(n+a<=i){let i,r,o,u;switch(a){case 1:e<128&&(s=e);break;case 2:i=t[n+1],128==(192&i)&&(u=(31&e)<<6|63&i,u>127&&(s=u));break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(u=(15&e)<<12|(63&i)<<6|63&r,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:i=t[n+1],r=t[n+2],o=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&o)&&(u=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&o,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=a}return function(t){const e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=R));return i}(r)}u.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(t,e,i){return c(t,e,i)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(t,e,i){return function(t,e,i){return h(t),t<=0?o(t):void 0!==e?"string"==typeof i?o(t).fill(e,i):o(t).fill(e):o(t)}(t,e,i)},u.allocUnsafe=function(t){return l(t)},u.allocUnsafeSlow=function(t){return l(t)},u.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==u.prototype},u.compare=function(t,e){if(G(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),G(e,Uint8Array)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=u.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(G(e,Uint8Array))n+e.length>r.length?(u.isBuffer(e)||(e=u.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else{if(!u.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){let t="";const i=e.IS;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},s&&(u.prototype[s]=u.prototype.inspect),u.prototype.compare=function(t,e,i,r,n){if(G(t,Uint8Array)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let s=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(e>>>=0);const o=Math.min(s,a),c=this.slice(r,n),h=t.slice(e,i);for(let t=0;t<o;++t)if(c[t]!==h[t]){s=c[t],a=h[t];break}return s<a?-1:a<s?1:0},u.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},u.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},u.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},u.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return w(this,t,e,i);case"utf8":case"utf-8":return I(this,t,e,i);case"ascii":case"latin1":case"binary":return E(this,t,e,i);case"base64":return A(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function O(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function U(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function P(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=X[t[r]];return n}function N(t,e,i){const r=t.slice(e,i);let n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function C(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,i,r,n,s){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function B(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,a>>=8,t[i++]=a,i}function D(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i+7]=s,s>>=8,t[i+6]=s,s>>=8,t[i+5]=s,s>>=8,t[i+4]=s;let a=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=a,a>>=8,t[i+2]=a,a>>=8,t[i+1]=a,a>>=8,t[i]=a,i+8}function M(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function x(t,e,i,r,s){return e=+e,i>>>=0,s||M(t,0,i,4),n.write(t,e,i,r,23,4),i+4}function Y(t,e,i,r,s){return e=+e,i>>>=0,s||M(t,0,i,8),n.write(t,e,i,r,52,8),i+8}u.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,u.prototype),r},u.prototype.readUintLE=u.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},u.prototype.readUint8=u.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=Q(function(t){F(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||k(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))}),u.prototype.readBigUInt64BE=Q(function(t){F(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||k(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)}),u.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=e,n=1,s=this[t+--r];for(;r>0&&(n*=256);)s+=this[t+--r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},u.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},u.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=Q(function(t){F(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||k(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),u.prototype.readBigInt64BE=Q(function(t){F(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||k(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)}),u.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||z(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||z(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,1,255,0),this[e]=255&t,e+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigUInt64LE=Q(function(t,e=0){return B(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Q(function(t,e=0){return D(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);z(this,t,e,i,r-1,-r)}let n=0,s=1,a=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===a&&0!==this[e+n-1]&&(a=1),this[e+n]=(t/s|0)-a&255;return e+i},u.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);z(this,t,e,i,r-1,-r)}let n=i-1,s=1,a=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===a&&0!==this[e+n+1]&&(a=1),this[e+n]=(t/s|0)-a&255;return e+i},u.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},u.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},u.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},u.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},u.prototype.writeBigInt64LE=Q(function(t,e=0){return B(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Q(function(t,e=0){return D(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(t,e,i){return x(this,t,e,!0,i)},u.prototype.writeFloatBE=function(t,e,i){return x(this,t,e,!1,i)},u.prototype.writeDoubleLE=function(t,e,i){return Y(this,t,e,!0,i)},u.prototype.writeDoubleBE=function(t,e,i){return Y(this,t,e,!1,i)},u.prototype.copy=function(t,e,i,r){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},u.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const s=u.isBuffer(t)?t:u.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=s[n%a]}return this};const K={};function L(t,e,i){K[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function q(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function V(t,e,i,r,n,s){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new K.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){F(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||k(e,t.length-(i+1))}(r,n,s)}function F(t,e){if("number"!=typeof t)throw new K.ERR_INVALID_ARG_TYPE(e,"number",t)}function k(t,e,i){if(Math.floor(t)!==t)throw F(t,i),new K.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new K.ERR_BUFFER_OUT_OF_BOUNDS;throw new K.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}L("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),L("ERR_OUT_OF_RANGE",function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=q(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=q(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r},RangeError);const H=/[^+/0-9A-Za-z-_]/g;function J(t,e){let i;e=e||1/0;const r=t.length;let n=null;const s=[];for(let a=0;a<r;++a){if(i=t.charCodeAt(a),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function W(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function j(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function G(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function Q(t){return"undefined"==typeof BigInt?Z:t}function Z(){throw new Error("BigInt not supported")}},307:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});const r=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let t=0;t<e.length;t++)e[t]=255;for(let i=0;i<t.length;i++){const r=t.charAt(i),n=r.charCodeAt(0);if(255!==e[n])throw new TypeError(r+" is ambiguous");e[n]=i}const i=t.length,r=t.charAt(0),n=Math.log(i)/Math.log(256),s=Math.log(256)/Math.log(i);function a(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;let s=0,a=0,o=0;for(;t[s]===r;)a++,s++;const u=(t.length-s)*n+1>>>0,c=new Uint8Array(u);for(;s<t.length;){const r=t.charCodeAt(s);if(r>255)return;let n=e[r];if(255===n)return;let a=0;for(let t=u-1;(0!==n||a<o)&&-1!==t;t--,a++)n+=i*c[t]>>>0,c[t]=n%256>>>0,n=n/256>>>0;if(0!==n)throw new Error("Non-zero carry");o=a,s++}let h=u-o;for(;h!==u&&0===c[h];)h++;const l=new Uint8Array(a+(u-h));let p=a;for(;h!==u;)l[p++]=c[h++];return l}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";let n=0,a=0,o=0;const u=e.length;for(;o!==u&&0===e[o];)o++,n++;const c=(u-o)*s+1>>>0,h=new Uint8Array(c);for(;o!==u;){let t=e[o],r=0;for(let e=c-1;(0!==t||r<a)&&-1!==e;e--,r++)t+=256*h[e]>>>0,h[e]=t%i>>>0,t=t/i>>>0;if(0!==t)throw new Error("Non-zero carry");a=r,o++}let l=c-a;for(;l!==c&&0===h[l];)l++;let p=r.repeat(n);for(;l<c;++l)p+=t.charAt(h[l]);return p},decodeUnsafe:a,decode:function(t){const e=a(t);if(e)return e;throw new Error("Non-base"+i+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},336:(t,e,i)=>{"use strict";i.d(e,{compressRawPublicKey:()=>n,toDerSignature:()=>s});var r=i(862);new Uint8Array([75,69,77,0,16]),new Uint8Array([72,80,75,69,0,16,0,1,0,2]),new Uint8Array([72,80,75,69,45,118,49]),new Uint8Array([115,101,99,114,101,116]),new Uint8Array([101,97,101,95,112,114,107]),new Uint8Array([115,104,97,114,101,100,95,115,101,99,114,101,116]),new Uint8Array([0,32,72,80,75,69,45,118,49,72,80,75,69,0,16,0,1,0,2,107,101,121,0,143,195,174,184,50,73,10,75,90,179,228,32,35,40,125,178,154,31,75,199,194,34,192,223,34,135,39,183,10,64,33,18,47,63,4,233,32,108,209,36,19,80,53,41,180,122,198,166,48,185,46,196,207,125,35,69,8,208,175,151,113,201,158,80]),new Uint8Array([0,12,72,80,75,69,45,118,49,72,80,75,69,0,16,0,1,0,2,98,97,115,101,95,110,111,110,99,101,0,143,195,174,184,50,73,10,75,90,179,228,32,35,40,125,178,154,31,75,199,194,34,192,223,34,135,39,183,10,64,33,18,47,63,4,233,32,108,209,36,19,80,53,41,180,122,198,166,48,185,46,196,207,125,35,69,8,208,175,151,113,201,158,80]);const n=t=>{const e=t.byteLength;var i=t.slice(0,1+e>>>1);return i[0]=2|1&t[e-1],i},s=t=>{const e=(0,r.Ks)(t),i=e.slice(0,32),n=e.slice(32,64),s=t=>{if(void 0===t||0===t.length||void 0===t[0])throw new Error("Invalid integer: input is undefined or empty.");const e=128&t[0]?new Uint8Array([0,...t]):t;return new Uint8Array([2,e.length,...e])},a=s(i),o=s(n),u=new Uint8Array([48,a.length+o.length,...a,...o]);return(0,r.pD)(u)};!function(t){let e=t;for(;e&&!(e.encode&&e.decode&&e.decodeUnsafe)&&e.default;)e=e.default}(i(31)),function(t){let e=t;for(;e&&!(e.encode&&e.decode&&e.decodeUnsafe)&&e.default;)e=e.default}(i(307))},410:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});const r=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],n={sha256:1};function s(t){if(t&&!n[t]&&!n[t.toLowerCase()])throw new Error("Digest method not supported");return new a}class a{constructor(){this.A=1779033703,this.B=-1150833019,this.C=1013904242,this.D=-1521486534,this.E=1359893119,this.F=-1694144372,this.G=528734635,this.H=1541459225,this._size=0,this._sp=0,(!u||c>=8e3)&&(u=new ArrayBuffer(8e3),c=0),this._byte=new Uint8Array(u,c,80),this._word=new Int32Array(u,c,20),c+=80}update(t){if("string"==typeof t)return this._utf8(t);if(null==t)throw new TypeError("Invalid type: "+typeof t);const e=t.byteOffset,i=t.byteLength;let r=i/64|0,n=0;if(r&&!(3&e)&&!(this._size%64)){const i=new Int32Array(t.buffer,e,16*r);for(;r--;)this._int32(i,n>>2),n+=64;this._size+=n}if(1!==t.BYTES_PER_ELEMENT&&t.buffer){const r=new Uint8Array(t.buffer,e+n,i-n);return this._uint8(r)}return n===i?this:this._uint8(t,n)}_uint8(t,e){const{_byte:i,_word:r}=this,n=t.length;for(e|=0;e<n;){const s=this._size%64;let a=s;for(;e<n&&a<64;)i[a++]=t[e++];a>=64&&this._int32(r),this._size+=a-s}return this}_utf8(t){const{_byte:e,_word:i}=this,r=t.length;let n=this._sp;for(let s=0;s<r;){const a=this._size%64;let o=a;for(;s<r&&o<64;){let i=0|t.charCodeAt(s++);i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<55296||i>57343?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):n?(i=((1023&n)<<10)+(1023&i)+65536,e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i,n=0):n=i}o>=64&&(this._int32(i),i[0]=i[16]),this._size+=o-a}return this._sp=n,this}_int32(t,e){let{A:i,B:n,C:s,D:a,E:u,F:c,G:h,H:b}=this,_=0;for(e|=0;_<16;)o[_++]=l(t[e++]);for(_=16;_<64;_++)o[_]=g(o[_-2])+o[_-7]+m(o[_-15])+o[_-16]|0;for(_=0;_<64;_++){const t=b+y(u)+p(u,c,h)+r[_]+o[_]|0,e=d(i)+f(i,n,s)|0;b=h,h=c,c=u,u=a+t|0,a=s,s=n,n=i,i=t+e|0}this.A=i+this.A|0,this.B=n+this.B|0,this.C=s+this.C|0,this.D=a+this.D|0,this.E=u+this.E|0,this.F=c+this.F|0,this.G=h+this.G|0,this.H=b+this.H|0}digest(t){const{_byte:e,_word:i}=this;let r=this._size%64|0;for(e[r++]=128;3&r;)e[r++]=0;if(r>>=2,r>14){for(;r<16;)i[r++]=0;r=0,this._int32(i)}for(;r<16;)i[r++]=0;const n=8*this._size,s=(4294967295&n)>>>0,a=(n-s)/4294967296;return a&&(i[14]=l(a)),s&&(i[15]=l(s)),this._int32(i),"hex"===t?this._hex():this._bin()}_hex(){const{A:t,B:e,C:i,D:r,E:n,F:s,G:a,H:o}=this;return h(t)+h(e)+h(i)+h(r)+h(n)+h(s)+h(a)+h(o)}_bin(){const{A:t,B:e,C:i,D:r,E:n,F:s,G:a,H:o,_byte:u,_word:c}=this;return c[0]=l(t),c[1]=l(e),c[2]=l(i),c[3]=l(r),c[4]=l(n),c[5]=l(s),c[6]=l(a),c[7]=l(o),u.slice(0,32)}}const o=new Int32Array(64);let u,c=0;const h=t=>(t+4294967296).toString(16).substr(-8),l=254===new Uint8Array(new Uint16Array([65279]).buffer)[0]?t=>t:t=>t<<24&4278190080|t<<8&16711680|t>>8&65280|t>>24&255,p=(t,e,i)=>i^t&(e^i),f=(t,e,i)=>t&e|i&(t|e),d=t=>(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=t=>(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7),m=t=>(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3,g=t=>(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10},442:(t,e,i)=>{"use strict";i.d(e,{sc:()=>I,qt:()=>A,Zf:()=>E});var r=i(531);function n(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}class a extends r.Vw{constructor(t,e,i,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=i,this.isLE=n,this.buffer=new Uint8Array(t),this.view=(0,r.O8)(this.buffer)}update(t){(0,r.CC)(this),t=(0,r.ZJ)(t),(0,r.DO)(t);const{view:e,buffer:i,blockLen:n}=this,s=t.length;for(let a=0;a<s;){const o=Math.min(n-this.pos,s-a);if(o===n){const e=(0,r.O8)(t);for(;n<=s-a;a+=n)this.process(e,a);continue}i.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,r.CC)(this),(0,r.Ht)(t,this),this.finished=!0;const{buffer:e,view:i,blockLen:n,isLE:s}=this;let{pos:a}=this;e[a++]=128,(0,r.uH)(this.buffer.subarray(a)),this.padOffset>n-a&&(this.process(i,0),a=0);for(let t=a;t<n;t++)e[t]=0;!function(t,e,i,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,i,r);const n=BigInt(32),s=BigInt(4294967295),a=Number(i>>n&s),o=Number(i&s),u=r?4:0,c=r?0:4;t.setUint32(e+u,a,r),t.setUint32(e+c,o,r)}(i,n-8,BigInt(8*this.length),s),this.process(i,0);const o=(0,r.O8)(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=u/4,h=this.get();if(c>h.length)throw new Error("_sha2: outputLen bigger than state");for(let t=0;t<c;t++)o.setUint32(4*t,h[t],s)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const i=t.slice(0,e);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:i,length:r,finished:n,destroyed:s,pos:a}=this;return t.destroyed=s,t.finished=n,t.length=r,t.pos=a,r%e&&t.buffer.set(i),t}clone(){return this._cloneInto()}}const o=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),u=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),c=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var h=i(271);const l=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),p=new Uint32Array(64);class f extends a{constructor(t=32){super(64,t,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:t,B:e,C:i,D:r,E:n,F:s,G:a,H:o}=this;return[t,e,i,r,n,s,a,o]}set(t,e,i,r,n,s,a,o){this.A=0|t,this.B=0|e,this.C=0|i,this.D=0|r,this.E=0|n,this.F=0|s,this.G=0|a,this.H=0|o}process(t,e){for(let i=0;i<16;i++,e+=4)p[i]=t.getUint32(e,!1);for(let t=16;t<64;t++){const e=p[t-15],i=p[t-2],n=(0,r.Ow)(e,7)^(0,r.Ow)(e,18)^e>>>3,s=(0,r.Ow)(i,17)^(0,r.Ow)(i,19)^i>>>10;p[t]=s+p[t-7]+n+p[t-16]|0}let{A:i,B:a,C:o,D:u,E:c,F:h,G:f,H:d}=this;for(let t=0;t<64;t++){const e=d+((0,r.Ow)(c,6)^(0,r.Ow)(c,11)^(0,r.Ow)(c,25))+n(c,h,f)+l[t]+p[t]|0,y=((0,r.Ow)(i,2)^(0,r.Ow)(i,13)^(0,r.Ow)(i,22))+s(i,a,o)|0;d=f,f=h,h=c,c=u+e|0,u=o,o=a,a=i,i=e+y|0}i=i+this.A|0,a=a+this.B|0,o=o+this.C|0,u=u+this.D|0,c=c+this.E|0,h=h+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(i,a,o,u,c,h,f,d)}roundClean(){(0,r.uH)(p)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.uH)(this.buffer)}}const d=(()=>h.lD(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),y=(()=>d[0])(),m=(()=>d[1])(),g=new Uint32Array(80),b=new Uint32Array(80);class _ extends a{constructor(t=64){super(128,t,16,!1),this.Ah=0|c[0],this.Al=0|c[1],this.Bh=0|c[2],this.Bl=0|c[3],this.Ch=0|c[4],this.Cl=0|c[5],this.Dh=0|c[6],this.Dl=0|c[7],this.Eh=0|c[8],this.El=0|c[9],this.Fh=0|c[10],this.Fl=0|c[11],this.Gh=0|c[12],this.Gl=0|c[13],this.Hh=0|c[14],this.Hl=0|c[15]}get(){const{Ah:t,Al:e,Bh:i,Bl:r,Ch:n,Cl:s,Dh:a,Dl:o,Eh:u,El:c,Fh:h,Fl:l,Gh:p,Gl:f,Hh:d,Hl:y}=this;return[t,e,i,r,n,s,a,o,u,c,h,l,p,f,d,y]}set(t,e,i,r,n,s,a,o,u,c,h,l,p,f,d,y){this.Ah=0|t,this.Al=0|e,this.Bh=0|i,this.Bl=0|r,this.Ch=0|n,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|u,this.El=0|c,this.Fh=0|h,this.Fl=0|l,this.Gh=0|p,this.Gl=0|f,this.Hh=0|d,this.Hl=0|y}process(t,e){for(let i=0;i<16;i++,e+=4)g[i]=t.getUint32(e),b[i]=t.getUint32(e+=4);for(let t=16;t<80;t++){const e=0|g[t-15],i=0|b[t-15],r=h.rE(e,i,1)^h.rE(e,i,8)^h.xn(e,i,7),n=h.ry(e,i,1)^h.ry(e,i,8)^h.jm(e,i,7),s=0|g[t-2],a=0|b[t-2],o=h.rE(s,a,19)^h.qh(s,a,61)^h.xn(s,a,6),u=h.ry(s,a,19)^h.Ei(s,a,61)^h.jm(s,a,6),c=h.CW(n,u,b[t-7],b[t-16]),l=h.CQ(c,r,o,g[t-7],g[t-16]);g[t]=0|l,b[t]=0|c}let{Ah:i,Al:r,Bh:n,Bl:s,Ch:a,Cl:o,Dh:u,Dl:c,Eh:l,El:p,Fh:f,Fl:d,Gh:_,Gl:w,Hh:I,Hl:E}=this;for(let t=0;t<80;t++){const e=h.rE(l,p,14)^h.rE(l,p,18)^h.qh(l,p,41),A=h.ry(l,p,14)^h.ry(l,p,18)^h.Ei(l,p,41),T=l&f^~l&_,v=p&d^~p&w,S=h.F8(E,A,v,m[t],b[t]),R=h.TH(S,I,e,T,y[t],g[t]),O=0|S,U=h.rE(i,r,28)^h.qh(i,r,34)^h.qh(i,r,39),P=h.ry(i,r,28)^h.Ei(i,r,34)^h.Ei(i,r,39),N=i&n^i&a^n&a,C=r&s^r&o^s&o;I=0|_,E=0|w,_=0|f,w=0|d,f=0|l,d=0|p,({h:l,l:p}=h.WQ(0|u,0|c,0|R,0|O)),u=0|a,c=0|o,a=0|n,o=0|s,n=0|i,s=0|r;const z=h.Vl(O,P,C);i=h.Vr(z,R,U,N),r=0|z}({h:i,l:r}=h.WQ(0|this.Ah,0|this.Al,0|i,0|r)),({h:n,l:s}=h.WQ(0|this.Bh,0|this.Bl,0|n,0|s)),({h:a,l:o}=h.WQ(0|this.Ch,0|this.Cl,0|a,0|o)),({h:u,l:c}=h.WQ(0|this.Dh,0|this.Dl,0|u,0|c)),({h:l,l:p}=h.WQ(0|this.Eh,0|this.El,0|l,0|p)),({h:f,l:d}=h.WQ(0|this.Fh,0|this.Fl,0|f,0|d)),({h:_,l:w}=h.WQ(0|this.Gh,0|this.Gl,0|_,0|w)),({h:I,l:E}=h.WQ(0|this.Hh,0|this.Hl,0|I,0|E)),this.set(i,r,n,s,a,o,u,c,l,p,f,d,_,w,I,E)}roundClean(){(0,r.uH)(g,b)}destroy(){(0,r.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class w extends _{constructor(){super(48),this.Ah=0|u[0],this.Al=0|u[1],this.Bh=0|u[2],this.Bl=0|u[3],this.Ch=0|u[4],this.Cl=0|u[5],this.Dh=0|u[6],this.Dl=0|u[7],this.Eh=0|u[8],this.El=0|u[9],this.Fh=0|u[10],this.Fl=0|u[11],this.Gh=0|u[12],this.Gl=0|u[13],this.Hh=0|u[14],this.Hl=0|u[15]}}const I=(0,r.qj)(()=>new f),E=(0,r.qj)(()=>new _),A=(0,r.qj)(()=>new w)},526:(t,e)=>{"use strict";e.byteLength=function(t){var e=o(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,s=o(t),a=s[0],u=s[1],c=new n(function(t,e,i){return 3*(e+i)/4-i}(0,a,u)),h=0,l=u>0?a-4:a;for(i=0;i<l;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=255&e;return 2===u&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,c[h++]=255&e),1===u&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,c[h++]=e>>8&255,c[h++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,s=[],a=16383,o=0,u=r-n;o<u;o+=a)s.push(c(t,o,o+a>u?u:o+a));return 1===n?(e=t[r-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function u(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function c(t,e,i){for(var r,n=[],s=e;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),n.push(u(r));return n.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},531:(t,e,i)=>{"use strict";i.d(e,{Vw:()=>T,DO:()=>a,CC:()=>u,sd:()=>o,Fe:()=>s,Ht:()=>c,My:()=>b,uH:()=>l,Id:()=>A,qj:()=>v,O8:()=>p,aT:()=>I,aY:()=>n,po:()=>S,Ow:()=>f,fd:()=>y,ZJ:()=>E,DH:()=>h});const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function s(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function a(t,...e){if(!n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function o(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");s(t.outputLen),s(t.blockLen)}function u(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function c(t,e){a(t);const i=e.outputLen;if(t.length<i)throw new Error("digestInto() expects output buffer of length at least "+i)}function h(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function l(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function p(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function f(t,e){return t<<32-e|t>>>e}function d(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const y=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?t=>t:function(t){for(let e=0;e<t.length;e++)t[e]=d(t[e]);return t},m=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),g=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function b(t){if(a(t),m)return t.toHex();let e="";for(let i=0;i<t.length;i++)e+=g[t[i]];return e}const _={_0:48,_9:57,A:65,F:70,a:97,f:102};function w(t){return t>=_._0&&t<=_._9?t-_._0:t>=_.A&&t<=_.F?t-(_.A-10):t>=_.a&&t<=_.f?t-(_.a-10):void 0}function I(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(m)return Uint8Array.fromHex(t);const e=t.length,i=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(i);for(let e=0,n=0;e<i;e++,n+=2){const i=w(t.charCodeAt(n)),s=w(t.charCodeAt(n+1));if(void 0===i||void 0===s){const e=t[n]+t[n+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+n)}r[e]=16*i+s}return r}function E(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t)),a(t),t}function A(...t){let e=0;for(let i=0;i<t.length;i++){const r=t[i];a(r),e+=r.length}const i=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const n=t[e];i.set(n,r),r+=n.length}return i}class T{}function v(t){const e=e=>t().update(E(e)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e}function S(t=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(t));if(r&&"function"==typeof r.randomBytes)return Uint8Array.from(r.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}},862:(t,e,i)=>{"use strict";i.d(e,{Ev:()=>r,JD:()=>n,Ks:()=>u,el:()=>a,pD:()=>o,up:()=>s});const r=32;function n(t){if(65!==t.length||4!==t[0])throw new Error("Invalid uncompressed P-256 key");const e=t.slice(1,33),i=t.slice(33,65);if(32!==e.length||32!==i.length)throw new Error("Invalid x or y length");const r=1&i[31]?3:2,n=new Uint8Array(33);return n[0]=r,n.set(e,1),n}function s(t){const e=function(t){if(0===arguments.length)throw new TypeError("1 argument required, but only 0 present.");let e;for(t=`${t}`,e=0;e<t.length;e++)if(t.charCodeAt(e)>255)throw new Error(`InvalidCharacterError: found code point greater than 255:${t.charCodeAt(e)} at position ${e}`);let i="";for(e=0;e<t.length;e+=3){const r=[void 0,void 0,void 0,void 0];r[0]=t.charCodeAt(e)>>2,r[1]=(3&t.charCodeAt(e))<<4,t.length>e+1&&(r[1]|=t.charCodeAt(e+1)>>4,r[2]=(15&t.charCodeAt(e+1))<<2),t.length>e+2&&(r[2]|=t.charCodeAt(e+2)>>6,r[3]=63&t.charCodeAt(e+2));for(let t=0;t<r.length;t++)void 0===r[t]?i+="=":i+=c(r[t])}return i}(t);return function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(e)}function a(t,e){const i=t.padStart(2*Math.ceil(t.length/2),"0");return s(u(i,e).reduce((t,e)=>t+String.fromCharCode(e),""))}function o(t){return t.reduce((t,e)=>t+e.toString(16).padStart(2,"0"),"")}const u=(t,e)=>{if(!t||t.length%2!=0||!/^[0-9A-Fa-f]+$/.test(t))throw new Error(`cannot create uint8array from invalid hex string: "${t}"`);const i=new Uint8Array(t.match(/../g).map(t=>parseInt(t,16)));if(!e)return i;if(t.length/2>e)throw new Error("hex value cannot fit in a buffer of "+e+" byte(s)");let r=new Uint8Array(e);return r.set(i,e-i.length),r};function c(t){if(t>=0&&t<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t]}},945:(t,e,i)=>{var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==i.g&&i.g,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r=void 0!==t&&t||"undefined"!=typeof self&&self||void 0!==i.g&&i.g||{},n="URLSearchParams"in r,s="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in r,u="ArrayBuffer"in r;if(u)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(t){return t&&c.indexOf(Object.prototype.toString.call(t))>-1};function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function p(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return s&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function m(t){return new Promise(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function g(t){var e=new FileReader,i=m(e);return e.readAsArrayBuffer(t),i}function b(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:a&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():u&&a&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=b(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u&&(ArrayBuffer.prototype.isPrototypeOf(t)||h(t))?this._bodyArrayBuffer=b(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return y(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(a)return this.blob().then(g);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t,e,i,r,n,s=y(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,i=m(e=new FileReader),n=(r=/charset=([A-Za-z0-9_-]+)/.exec(t.type))?r[1]:"utf-8",e.readAsText(t,n),i;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),i=new Array(e.length),r=0;r<e.length;r++)i[r]=String.fromCharCode(e[r]);return i.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(t,e){t=l(t),e=p(e);var i=this.map[t];this.map[t]=i?i+", "+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=p(e)},d.prototype.forEach=function(t,e){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(e,this.map[i],i,this)},d.prototype.keys=function(){var t=[];return this.forEach(function(e,i){t.push(i)}),f(t)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),f(t)},d.prototype.entries=function(){var t=[];return this.forEach(function(e,i){t.push([i,e])}),f(t)},s&&(d.prototype[Symbol.iterator]=d.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function I(t,e){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var i,n,s=(e=e||{}).body;if(t instanceof I){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,s||null==t._bodyInit||(s=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=(i=e.method||this.method||"GET").toUpperCase(),w.indexOf(n)>-1?n:i),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function E(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function A(t,e){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}I.prototype.clone=function(){return new I(this,{body:this._bodyInit})},_.call(I.prototype),_.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},A.error=function(){var t=new A(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var T=[301,302,303,307,308];A.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new A(null,{status:e,headers:{location:t}})},e.DOMException=r.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var i=Error(t);this.stack=i.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function v(t,i){return new Promise(function(n,s){var o=new I(t,i);if(o.signal&&o.signal.aborted)return s(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function h(){c.abort()}if(c.onload=function(){var t,e,i={statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t}).forEach(function(t){var i=t.split(":"),r=i.shift().trim();if(r){var n=i.join(":").trim();try{e.append(r,n)}catch(t){console.warn("Response "+t.message)}}}),e)};0===o.url.indexOf("file://")&&(c.status<200||c.status>599)?i.status=200:i.status=c.status,i.url="responseURL"in c?c.responseURL:i.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout(function(){n(new A(r,i))},0)},c.onerror=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){s(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){s(new e.DOMException("Aborted","AbortError"))},0)},c.open(o.method,function(t){try{return""===t&&r.location.href?r.location.href:t}catch(e){return t}}(o.url),!0),"include"===o.credentials?c.withCredentials=!0:"omit"===o.credentials&&(c.withCredentials=!1),"responseType"in c&&(a?c.responseType="blob":u&&(c.responseType="arraybuffer")),i&&"object"==typeof i.headers&&!(i.headers instanceof d||r.Headers&&i.headers instanceof r.Headers)){var f=[];Object.getOwnPropertyNames(i.headers).forEach(function(t){f.push(l(t)),c.setRequestHeader(t,p(i.headers[t]))}),o.headers.forEach(function(t,e){-1===f.indexOf(e)&&c.setRequestHeader(e,t)})}else o.headers.forEach(function(t,e){c.setRequestHeader(e,t)});o.signal&&(o.signal.addEventListener("abort",h),c.onreadystatechange=function(){4===c.readyState&&o.signal.removeEventListener("abort",h)}),c.send(void 0===o._bodyInit?null:o._bodyInit)})}v.polyfill=!0,r.fetch||(r.fetch=v,r.Headers=d,r.Request=I,r.Response=A),e.Headers=d,e.Request=I,e.Response=A,e.fetch=v,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=r.fetch?r:n;(e=s.fetch).default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}},s={};function a(t){var e=s[t];if(void 0!==e)return e.exports;var i=s[t]={exports:{}};return n[t](i,i.exports,a),i.exports}a.m=n,e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"==typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"==typeof i.then)return i}var n=Object.create(null);a.r(n);var s={};t=t||[null,e({}),e([]),e(e)];for(var o=2&r&&i;("object"==typeof o||"function"==typeof o)&&!~t.indexOf(o);o=e(o))Object.getOwnPropertyNames(o).forEach(t=>s[t]=()=>i[t]);return s.default=()=>i,a.d(n,s),n},a.d=(t,e)=>{for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce((e,i)=>(a.f[i](t,e),e),[])),a.u=t=>t+".turnkey.bundle.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i={},r="TurnkeySDK:",a.l=(t,e,n,s)=>{if(i[t])i[t].push(e);else{var o,u;if(void 0!==n)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var l=c[h];if(l.getAttribute("src")==t||l.getAttribute("data-webpack")==r+n){o=l;break}}o||(u=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",r+n),o.src=t),i[t]=[e];var p=(e,r)=>{o.onerror=o.onload=null,clearTimeout(f);var n=i[t];if(delete i[t],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(t=>t(r)),e)return e(r)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),u&&document.head.appendChild(o)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{var t={792:0};a.f.j=(e,i)=>{var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise((i,n)=>r=t[e]=[i,n]);i.push(r[2]=n);var s=a.p+a.u(e),o=new Error;a.l(s,i=>{if(a.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}},"chunk-"+e,e)}};var e=(e,i)=>{var r,n,[s,o,u]=i,c=0;if(s.some(e=>0!==t[e])){for(r in o)a.o(o,r)&&(a.m[r]=o[r]);u&&u(a)}for(e&&e(i);c<s.length;c++)n=s[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0},i=self.webpackChunkTurnkeySDK=self.webpackChunkTurnkeySDK||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})(),(()=>{"use strict";function t(t){const e=new Uint8Array(t);let i="";for(const t of e)i+=String.fromCharCode(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof crypto&&crypto.subtle,"undefined"!=typeof process&&null!=process.versions&&process.versions.node,a(945);const e="copy",i="convert";function r(t,n,s){if(n===e)return s;if(n===i)return t(s);if(n instanceof Array)return s.map(e=>r(t,n[0],e));if(n instanceof Object){const e={};for(const[i,a]of Object.entries(n)){if(a.derive){const t=a.derive(s);void 0!==t&&(s[i]=t)}if(i in s)null!=s[i]?e[i]=r(t,a.schema,s[i]):e[i]=null;else if(a.required)throw new Error(`Missing key: ${i}`)}return e}}function n(t,e){return{required:!0,schema:t,derive:e}}function s(t){return{required:!0,schema:t}}function o(t){return{required:!1,schema:t}}const u={appid:o(e),appidExclude:o(e),credProps:o(e)},c={type:s(e),id:s(e),rawId:s(i),authenticatorAttachment:o(e),response:s({clientDataJSON:s(i),attestationObject:s(i),transports:n(e,t=>t.getTransports?.()||[])}),clientExtensionResults:n(u,t=>t.getClientExtensionResults())};function h(e){return r(t,c,e)}function l(t){switch(t){case"internal":return"AUTHENTICATOR_TRANSPORT_INTERNAL";case"usb":return"AUTHENTICATOR_TRANSPORT_USB";case"nfc":return"AUTHENTICATOR_TRANSPORT_NFC";case"ble":return"AUTHENTICATOR_TRANSPORT_BLE";case"hybrid":return"AUTHENTICATOR_TRANSPORT_HYBRID";default:throw new Error("unsupported transport format")}}async function p(t){if(!window.PublicKeyCredential)throw new Error("webauthn is not supported by this browser");const e=await async function(t){const e=await navigator.credentials.create(t);return e.toJSON=()=>h(e),e}(t);return{credentialId:(i=e.toJSON()).rawId,attestationObject:i.response.attestationObject,clientDataJson:i.response.clientDataJSON,transports:i.response.transports.map(l)};var i}s(e),s(e),s(i),o(e),s({clientDataJSON:s(i),authenticatorData:s(i),signature:s(i),userHandle:s(i)}),n(u,t=>t.getClientExtensionResults()),Error,Error,Error,Error;const f=["ACTIVITY_STATUS_COMPLETED","ACTIVITY_STATUS_FAILED","ACTIVITY_STATUS_REJECTED"];var d,y;!function(t){t.PublicKeyReady="PUBLIC_KEY_READY",t.InjectCredentialBundle="INJECT_CREDENTIAL_BUNDLE",t.InjectKeyExportBundle="INJECT_KEY_EXPORT_BUNDLE",t.InjectWalletExportBundle="INJECT_WALLET_EXPORT_BUNDLE",t.InjectImportBundle="INJECT_IMPORT_BUNDLE",t.ExtractWalletEncryptedBundle="EXTRACT_WALLET_ENCRYPTED_BUNDLE",t.ExtractKeyEncryptedBundle="EXTRACT_KEY_ENCRYPTED_BUNDLE",t.ApplySettings="APPLY_SETTINGS",t.BundleInjected="BUNDLE_INJECTED",t.EncryptedBundleExtracted="ENCRYPTED_BUNDLE_EXTRACTED",t.SettingsApplied="SETTINGS_APPLIED",t.StampRequest="STAMP_REQUEST",t.Stamp="STAMP",t.TurnkeyInitMessageChannel="TURNKEY_INIT_MESSAGE_CHANNEL",t.GetEmbeddedPublicKey="GET_EMBEDDED_PUBLIC_KEY",t.ClearEmbeddedKey="RESET_EMBEDDED_KEY",t.InitEmbeddedKey="INIT_EMBEDDED_KEY",t.Error="ERROR"}(d||(d={})),function(t){t.Hexadecimal="HEXADECIMAL",t.Solana="SOLANA"}(y||(y={}));class m{constructor(t){if("undefined"==typeof window)throw new Error("Cannot initialize iframe in non-browser environment");if("undefined"==typeof MessageChannel)throw new Error("Cannot initialize iframe without MessageChannel support");if(!t.iframeContainer)throw new Error("Iframe container cannot be found");if(this.container=t.iframeContainer,this.container.querySelector(`#${t.iframeElementId}`))throw new Error(`Iframe element with ID ${t.iframeElementId} already exists`);let e=window.document.createElement("iframe");e.setAttribute("sandbox","allow-scripts allow-same-origin"),e.id=t.iframeElementId,e.src=t.iframeUrl,this.iframe=e;const i=new URL(t.iframeUrl);this.iframeOrigin=i.origin,this.iframePublicKey=null,this.messageChannel=new MessageChannel,this.pendingRequests=new Map}onMessageHandler(t){const{type:e,value:i,requestId:r}=t.data||{};if(!r)return e===d.PublicKeyReady?void(this.iframePublicKey=i):void 0;const n=this.pendingRequests.get(r);n?(this.pendingRequests.delete(r),e!==d.Error?e===d.Stamp?n.resolve({stampHeaderName:"X-Stamp",stampHeaderValue:i}):n.resolve(i):n.reject(new Error(i))):console.warn(`Received response for unknown request: ${r}`)}async init(t){return new Promise((e,i)=>{this.container.appendChild(this.iframe),this.iframe.addEventListener("load",()=>{this.iframe.contentWindow?.postMessage?this.iframe.contentWindow.postMessage({type:d.TurnkeyInitMessageChannel,dangerouslyOverrideIframeKeyTtl:t},this.iframeOrigin,[this.messageChannel.port2]):i(new Error("contentWindow or contentWindow.postMessage does not exist"))}),this.messageChannel.port1.onmessage=t=>{t.data?.type===d.PublicKeyReady&&(this.iframePublicKey=t.data.value,e(t.data.value)),this.onMessageHandler(t)}})}clear(){this.messageChannel?.port1?.close(),this.messageChannel?.port2?.close(),this.iframe.remove(),this.pendingRequests.clear()}publicKey(){return this.iframePublicKey}async getEmbeddedPublicKey(){const t=await this.createRequest(d.GetEmbeddedPublicKey);return this.iframePublicKey=t,t}async clearEmbeddedKey(){return await this.createRequest(d.ClearEmbeddedKey),this.iframePublicKey="",null}async initEmbeddedKey(){const t=await this.createRequest(d.InitEmbeddedKey);return this.iframePublicKey=t,t}createRequest(t,e={}){return new Promise((i,r)=>{const n=crypto.randomUUID();this.pendingRequests.set(n,{resolve:i,reject:r,requestId:n}),this.messageChannel.port1.postMessage({type:t,requestId:n,...e})})}async injectCredentialBundle(t){return this.createRequest(d.InjectCredentialBundle,{value:t})}async injectKeyExportBundle(t,e,i){return this.createRequest(d.InjectKeyExportBundle,{value:t,keyFormat:i,organizationId:e})}async injectWalletExportBundle(t,e){return this.createRequest(d.InjectWalletExportBundle,{value:t,organizationId:e})}async injectImportBundle(t,e,i){return this.createRequest(d.InjectImportBundle,{value:t,organizationId:e,userId:i})}async extractWalletEncryptedBundle(){return this.createRequest(d.ExtractWalletEncryptedBundle)}async extractKeyEncryptedBundle(t){return this.createRequest(d.ExtractKeyEncryptedBundle,{keyFormat:t})}async applySettings(t){return this.createRequest(d.ApplySettings,{value:JSON.stringify(t)})}async stamp(t){if(null===this.iframePublicKey)throw new Error("null iframe public key. Have you called/awaited .init()?");return this.createRequest(d.StampRequest,{value:t})}}function g(t){const e=new Uint8Array(t);let i="";for(const t of e)i+=String.fromCharCode(t);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}const b="copy",_="convert";function w(t,e,i){if(e===b)return i;if(e===_)return t(i);if(e instanceof Array)return i.map(i=>w(t,e[0],i));if(e instanceof Object){const r={};for(const[n,s]of Object.entries(e)){if(s.derive){const t=s.derive(i);void 0!==t&&(i[n]=t)}if(n in i)null!=i[n]?r[n]=w(t,s.schema,i[n]):r[n]=null;else if(s.required)throw new Error(`Missing key: ${n}`)}return r}}function I(t){return{required:!0,schema:t}}function E(t){return{required:!1,schema:t}}const A={appid:E(b),appidExclude:E(b),credProps:E(b)},T={type:I(b),id:I(b),rawId:I(_),authenticatorAttachment:E(b),response:I({clientDataJSON:I(_),authenticatorData:I(_),signature:I(_),userHandle:I(_)}),clientExtensionResults:(v=A,S=t=>t.getClientExtensionResults(),{required:!0,schema:v,derive:S})};var v,S;function R(t){return w(g,T,t)}var O,U,P=a(410);class N{constructor(t){this.rpId=t.rpId,this.timeout=t.timeout||3e5,this.userVerification=t.userVerification||"preferred",this.allowCredentials=t.allowCredentials||[]}async stamp(t){const e=function(t){const e=(0,P.n)().update(t).digest("hex");return(new TextEncoder).encode(e)}(t),i={publicKey:{rpId:this.rpId,challenge:e,allowCredentials:this.allowCredentials,timeout:this.timeout,userVerification:this.userVerification}},r=(await async function(t){const e=await navigator.credentials.get(t);return e.toJSON=()=>R(e),e}(i)).toJSON(),n={authenticatorData:r.response.authenticatorData,clientDataJson:r.response.clientDataJSON,credentialId:r.id,signature:r.response.signature};return{stampHeaderName:"X-Stamp-Webauthn",stampHeaderValue:JSON.stringify(n)}}}class C extends Error{constructor(t,e=null){super(`${t}${e?` - error: ${e.message}`:""}`),this.originalError=e,this.name="WalletStamperError"}}(U=O||(O={})).Ethereum="ethereum",U.Solana="solana";var z=a(862);class B{constructor(t){this.wallet=t}async stamp(t){let e;try{e=await this.wallet.signMessage(t)}catch(t){throw new C("Failed to sign the message",t)}const i=this.wallet.type===O.Solana?"SIGNATURE_SCHEME_TK_API_ED25519":"SIGNATURE_SCHEME_TK_API_SECP256K1_EIP191";let r;try{if(this.wallet.type===O.Ethereum){const{recoverPublicKey:i,hashMessage:n}=await a.e(576).then(a.bind(a,576)),{compressRawPublicKey:s,toDerSignature:o}=await Promise.resolve().then(a.bind(a,336));r=(await i({hash:n(t),signature:e})).replace("0x","");const u=Uint8Array.from(Buffer.from(r,"hex"));r=Buffer.from(s(u)).toString("hex"),e=o(e.replace("0x",""))}else r=await this.wallet.getPublicKey()}catch(t){throw new C("Failed to recover public key",t)}const n={publicKey:r,scheme:i,signature:e};return{stampHeaderName:"X-Stamp",stampHeaderValue:(0,z.up)(JSON.stringify(n))}}}a(336);var D,M,x,Y,K="undefined"!=typeof window?window:{localStorage:{getItem:t=>null,setItem:(t,e)=>{},removeItem:t=>{},clear:()=>{},key:t=>null,length:0},location:{hostname:""}};!function(t){t[t.Get=0]="Get",t[t.List=1]="List",t[t.Command=2]="Command"}(D||(D={}));class L extends Error{constructor(t){let e=`Turnkey error ${t.code}: ${t.message}`;null!=t.details&&(e+=` (Details: ${JSON.stringify(t.details)})`),super(e),this.name="TurnkeyRequestError",this.details=t.details??null,this.code=t.code}}!function(t){t.Passkey="passkey",t.Wallet="wallet",t.Iframe="iframe",t.IndexedDb="indexed-db"}(M||(M={})),function(t){t.Session="@turnkey/session/v2",t.Client="@turnkey/client"}(x||(x={})),function(t){t.Local="local",t.Secure="secure",t.Session="session"}(Y||(Y={}));const q={[x.Session]:Y.Session,[x.Client]:Y.Session},V={[Y.Local]:K.localStorage,[Y.Secure]:K.localStorage,[Y.Session]:K.localStorage},F=async t=>{const e=V[q[t]].getItem(t);return e?JSON.parse(e):void 0},k=async(t,e)=>{V[q[t]].setItem(t,JSON.stringify(e))},H=async t=>{V[q[t]].removeItem(t)},J=async(t,e)=>{await k(x.Session,t),e&&await k(x.Client,e)};var W,j,G,$,X,Q;!function(t){t.READ_ONLY="SESSION_TYPE_READ_ONLY",t.READ_WRITE="SESSION_TYPE_READ_WRITE"}(W||(W={})),function(t){t.COINBASE="FIAT_ON_RAMP_PROVIDER_COINBASE",t.MOONPAY="FIAT_ON_RAMP_PROVIDER_MOONPAY"}(j||(j={})),function(t){t.BITCOIN="FIAT_ON_RAMP_CRYPTO_CURRENCY_BTC",t.ETHEREUM="FIAT_ON_RAMP_CRYPTO_CURRENCY_ETH",t.SOLANA="FIAT_ON_RAMP_CRYPTO_CURRENCY_SOL",t.USDC="FIAT_ON_RAMP_CRYPTO_CURRENCY_USDC"}(G||(G={})),function(t){t.AUD="FIAT_ON_RAMP_CURRENCY_AUD",t.BGN="FIAT_ON_RAMP_CURRENCY_BGN",t.BRL="FIAT_ON_RAMP_CURRENCY_BRL",t.CAD="FIAT_ON_RAMP_CURRENCY_CAD",t.CHF="FIAT_ON_RAMP_CURRENCY_CHF",t.COP="FIAT_ON_RAMP_CURRENCY_COP",t.CZK="FIAT_ON_RAMP_CURRENCY_CZK",t.DKK="FIAT_ON_RAMP_CURRENCY_DKK",t.DOP="FIAT_ON_RAMP_CURRENCY_DOP",t.EGP="FIAT_ON_RAMP_CURRENCY_EGP",t.EUR="FIAT_ON_RAMP_CURRENCY_EUR",t.GBP="FIAT_ON_RAMP_CURRENCY_GBP",t.HKD="FIAT_ON_RAMP_CURRENCY_HKD",t.IDR="FIAT_ON_RAMP_CURRENCY_IDR",t.ILS="FIAT_ON_RAMP_CURRENCY_ILS",t.JOD="FIAT_ON_RAMP_CURRENCY_JOD",t.KES="FIAT_ON_RAMP_CURRENCY_KES",t.KWD="FIAT_ON_RAMP_CURRENCY_KWD",t.LKR="FIAT_ON_RAMP_CURRENCY_LKR",t.MXN="FIAT_ON_RAMP_CURRENCY_MXN",t.NGN="FIAT_ON_RAMP_CURRENCY_NGN",t.NOK="FIAT_ON_RAMP_CURRENCY_NOK",t.NZD="FIAT_ON_RAMP_CURRENCY_NZD",t.OMR="FIAT_ON_RAMP_CURRENCY_OMR",t.PEN="FIAT_ON_RAMP_CURRENCY_PEN",t.PLN="FIAT_ON_RAMP_CURRENCY_PLN",t.RON="FIAT_ON_RAMP_CURRENCY_RON",t.SEK="FIAT_ON_RAMP_CURRENCY_SEK",t.THB="FIAT_ON_RAMP_CURRENCY_THB",t.TRY="FIAT_ON_RAMP_CURRENCY_TRY",t.TWD="FIAT_ON_RAMP_CURRENCY_TWD",t.USD="FIAT_ON_RAMP_CURRENCY_USD",t.VND="FIAT_ON_RAMP_CURRENCY_VND",t.ZAR="FIAT_ON_RAMP_CURRENCY_ZAR"}($||($={})),function(t){t.BITCOIN="FIAT_ON_RAMP_BLOCKCHAIN_NETWORK_BITCOIN",t.ETHEREUM="FIAT_ON_RAMP_BLOCKCHAIN_NETWORK_ETHEREUM",t.SOLANA="FIAT_ON_RAMP_BLOCKCHAIN_NETWORK_SOLANA",t.BASE="FIAT_ON_RAMP_BLOCKCHAIN_NETWORK_BASE"}(X||(X={})),function(t){t.CREDIT_DEBIT_CARD="FIAT_ON_RAMP_PAYMENT_METHOD_CREDIT_DEBIT_CARD",t.APPLE_PAY="FIAT_ON_RAMP_PAYMENT_METHOD_APPLE_PAY",t.GBP_BANK_TRANSFER="FIAT_ON_RAMP_PAYMENT_METHOD_GBP_BANK_TRANSFER",t.GBP_OPEN_BANKING_PAYMENT="FIAT_ON_RAMP_PAYMENT_METHOD_GBP_OPEN_BANKING_PAYMENT",t.GOOGLE_PAY="FIAT_ON_RAMP_PAYMENT_METHOD_GOOGLE_PAY",t.SEPA_BANK_TRANSFER="FIAT_ON_RAMP_PAYMENT_METHOD_SEPA_BANK_TRANSFER",t.PIX_INSTANT_PAYMENT="FIAT_ON_RAMP_PAYMENT_METHOD_PIX_INSTANT_PAYMENT",t.PAYPAL="FIAT_ON_RAMP_PAYMENT_METHOD_PAYPAL",t.VENMO="FIAT_ON_RAMP_PAYMENT_METHOD_VENMO",t.MOONPAY_BALANCE="FIAT_ON_RAMP_PAYMENT_METHOD_MOONPAY_BALANCE",t.CRYPTO_ACCOUNT="FIAT_ON_RAMP_PAYMENT_METHOD_CRYPTO_ACCOUNT",t.FIAT_WALLET="FIAT_ON_RAMP_PAYMENT_METHOD_FIAT_WALLET",t.ACH_BANK_ACCOUNT="FIAT_ON_RAMP_PAYMENT_METHOD_ACH_BANK_ACCOUNT"}(Q||(Q={}));const Z="@turnkey/sdk-browser@5.8.0";var tt,et,it=a(287);a(31),Error,tt=globalThis,et={},new Proxy(tt,{get:(t,e,i)=>e in et?et[e]:tt[e],set:(t,e,i)=>(e in et&&delete et[e],tt[e]=i,!0),deleteProperty(t,e){let i=!1;return e in et&&(delete et[e],i=!0),e in tt&&(delete tt[e],i=!0),i},ownKeys(t){const e=Reflect.ownKeys(tt),i=Reflect.ownKeys(et),r=new Set(i);return[...e.filter(t=>!r.has(t)),...i]},defineProperty:(t,e,i)=>(e in et&&delete et[e],Reflect.defineProperty(tt,e,i),!0),getOwnPropertyDescriptor:(t,e)=>e in et?Reflect.getOwnPropertyDescriptor(et,e):Reflect.getOwnPropertyDescriptor(tt,e),has:(t,e)=>e in et||e in tt}),new Uint8Array(0),new Uint8Array([75,69,77,0,0]),new Uint8Array([101,97,101,95,112,114,107]),new Uint8Array([115,104,97,114,101,100,95,115,101,99,114,101,116]),new Uint8Array([100,107,112,95,112,114,107]),new Uint8Array([115,107]),new Uint8Array([99,97,110,100,105,100,97,116,101]),new Uint8Array([255,255,255,255,0,0,0,0,255,255,255,255,255,255,255,255,188,230,250,173,167,23,158,132,243,185,202,194,252,99,37,81]),new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,199,99,77,129,244,55,45,223,88,26,13,178,72,176,167,122,236,236,25,106,204,197,41,115]),new Uint8Array([1,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,250,81,134,135,131,191,47,150,107,127,204,1,72,247,9,165,208,59,181,201,184,137,156,71,174,187,111,183,30,145,56,100,9]),new Uint8Array([48,65,2,1,0,48,19,6,7,42,134,72,206,61,2,1,6,8,42,134,72,206,61,3,1,7,4,39,48,37,2,1,1,4,32]),new Uint8Array([48,78,2,1,0,48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,34,4,55,48,53,2,1,1,4,48]),new Uint8Array([48,96,2,1,0,48,16,6,7,42,134,72,206,61,2,1,6,5,43,129,4,0,35,4,73,48,71,2,1,1,4,66]),new Uint8Array([72,80,75,69,45,118,49]);function rt(t){if("boolean"!=typeof t)throw new Error(`boolean expected, not ${t}`)}function nt(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function st(t,e,i=""){const r=(n=t)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name;var n;const s=t?.length,a=void 0!==e;if(!r||a&&s!==e)throw new Error((i&&`"${i}" `)+"expected Uint8Array"+(a?` of length ${e}`:"")+", got "+(r?`length=${s}`:"type="+typeof t));return t}function at(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ot(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}BigInt(0),BigInt(1),BigInt(2),new Uint8Array([115,101,99]),new Uint8Array([98,97,115,101,95,110,111,110,99,101]),new Uint8Array([101,120,112]),new Uint8Array([105,110,102,111,95,104,97,115,104]),new Uint8Array([107,101,121]),new Uint8Array([112,115,107,95,105,100,95,104,97,115,104]),new Uint8Array([115,101,99,114,101,116]),new Uint8Array([72,80,75,69,0,0,0,0,0,0]),new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,110,4,34,4,32]),new Uint8Array([48,70,2,1,0,48,5,6,3,43,101,111,4,58,4,56]);function ut(t){return Uint8Array.from(t)}const ct=t=>Uint8Array.from(t.split("").map(t=>t.charCodeAt(0))),ht=ct("expand 16-byte k"),lt=ct("expand 32-byte k"),pt=at(ht),ft=at(lt);function dt(t,e){return t<<e|t>>>32-e}function yt(t){return t.byteOffset%4==0}const mt=2**32-1,gt=Uint32Array.of();function bt(t,e){const{allowShortKeys:i,extendNonceFn:r,counterLength:n,counterRight:s,rounds:a}=function(t,e){if(null==e||"object"!=typeof e)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e)}(0,e);if("function"!=typeof t)throw new Error("core must be a function");return nt(n),nt(a),rt(s),rt(i),(e,o,u,c,h=0)=>{st(e,void 0,"key"),st(o,void 0,"nonce"),st(u,void 0,"data");const l=u.length;if(void 0===c&&(c=new Uint8Array(l)),st(c,void 0,"output"),nt(h),h<0||h>=mt)throw new Error("arx: counter overflow");if(c.length<l)throw new Error(`arx: output (${c.length}) is shorter than data (${l})`);const p=[],f=e.length;let d,y;if(32===f)p.push(d=ut(e)),y=ft;else{if(16!==f||!i)throw st(e,32,"arx key"),new Error("invalid key size");d=new Uint8Array(32),d.set(e),d.set(e,16),y=pt,p.push(d)}yt(o)||p.push(o=ut(o));const m=at(d);if(r){if(24!==o.length)throw new Error("arx: extended nonce must be 24 bytes");r(y,m,at(o.subarray(0,16)),m),o=o.subarray(16)}const g=16-n;if(g!==o.length)throw new Error(`arx: nonce must be ${g} or 16 bytes`);if(12!==g){const t=new Uint8Array(12);t.set(o,s?0:12-o.length),o=t,p.push(o)}const b=at(o);return function(t,e,i,r,n,s,a,o){const u=n.length,c=new Uint8Array(64),h=at(c),l=yt(n)&&yt(s),p=l?at(n):gt,f=l?at(s):gt;for(let d=0;d<u;a++){if(t(e,i,r,h,a,o),a>=mt)throw new Error("arx: counter overflow");const y=Math.min(64,u-d);if(l&&64===y){const t=d/4;if(d%4!=0)throw new Error("arx: invalid block position");for(let e,i=0;i<16;i++)e=t+i,f[e]=p[e]^h[i];d+=64;continue}for(let t,e=0;e<y;e++)t=d+e,s[t]=n[t]^c[e];d+=y}}(t,y,m,b,u,c,h,a),ot(...p),c}}function _t(t,e,i,r,n,s=20){const a=t[0],o=t[1],u=t[2],c=t[3],h=e[0],l=e[1],p=e[2],f=e[3],d=e[4],y=e[5],m=e[6],g=e[7],b=n,_=i[0],w=i[1],I=i[2];let E=a,A=o,T=u,v=c,S=h,R=l,O=p,U=f,P=d,N=y,C=m,z=g,B=b,D=_,M=w,x=I;for(let t=0;t<s;t+=2)E=E+S|0,B=dt(B^E,16),P=P+B|0,S=dt(S^P,12),E=E+S|0,B=dt(B^E,8),P=P+B|0,S=dt(S^P,7),A=A+R|0,D=dt(D^A,16),N=N+D|0,R=dt(R^N,12),A=A+R|0,D=dt(D^A,8),N=N+D|0,R=dt(R^N,7),T=T+O|0,M=dt(M^T,16),C=C+M|0,O=dt(O^C,12),T=T+O|0,M=dt(M^T,8),C=C+M|0,O=dt(O^C,7),v=v+U|0,x=dt(x^v,16),z=z+x|0,U=dt(U^z,12),v=v+U|0,x=dt(x^v,8),z=z+x|0,U=dt(U^z,7),E=E+R|0,x=dt(x^E,16),C=C+x|0,R=dt(R^C,12),E=E+R|0,x=dt(x^E,8),C=C+x|0,R=dt(R^C,7),A=A+O|0,B=dt(B^A,16),z=z+B|0,O=dt(O^z,12),A=A+O|0,B=dt(B^A,8),z=z+B|0,O=dt(O^z,7),T=T+U|0,D=dt(D^T,16),P=P+D|0,U=dt(U^P,12),T=T+U|0,D=dt(D^T,8),P=P+D|0,U=dt(U^P,7),v=v+S|0,M=dt(M^v,16),N=N+M|0,S=dt(S^N,12),v=v+S|0,M=dt(M^v,8),N=N+M|0,S=dt(S^N,7);let Y=0;r[Y++]=a+E|0,r[Y++]=o+A|0,r[Y++]=u+T|0,r[Y++]=c+v|0,r[Y++]=h+S|0,r[Y++]=l+R|0,r[Y++]=p+O|0,r[Y++]=f+U|0,r[Y++]=d+P|0,r[Y++]=y+N|0,r[Y++]=m+C|0,r[Y++]=g+z|0,r[Y++]=b+B|0,r[Y++]=_+D|0,r[Y++]=w+M|0,r[Y++]=I+x|0}const wt=bt(_t,{counterRight:!1,counterLength:4,allowShortKeys:!1});BigInt(1),BigInt(2),BigInt(3),BigInt(5),BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BigInt(1),BigInt(2),BigInt(3),BigInt(11),BigInt(22),BigInt(44),BigInt(88),BigInt(223);const It=()=>{const t=new Uint8Array(32);return crypto.getRandomValues(t),t.buffer},Et=t=>it.hp.from(t).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");function At(t){if("string"!=typeof t)return t;const[,e]=t.split(".");if(!e)throw new Error("Invalid JWT: Missing payload");const i=JSON.parse(atob(e)),{exp:r,public_key:n,session_type:s,user_id:a,organization_id:o}=i;if(!(r&&n&&s&&a&&o))throw new Error("JWT payload missing required fields");return{sessionType:s,userId:a,organizationId:o,expiry:r,token:n}}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));class Tt{constructor(t){this.getActivity=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_activity",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetActivity=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_activity",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getApiKey=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_api_key",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetApiKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_api_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getApiKeys=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_api_keys",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetApiKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_api_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getAttestationDocument=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_attestation",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetAttestationDocument=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_attestation",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getAuthenticator=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_authenticator",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetAuthenticator=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_authenticator",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getAuthenticators=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_authenticators",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetAuthenticators=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_authenticators",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getOauthProviders=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_oauth_providers",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetOauthProviders=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_oauth_providers",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getOrganization=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_organization",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetOrganization=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_organization",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getOrganizationConfigs=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_organization_configs",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetOrganizationConfigs=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_organization_configs",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPolicy=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_policy",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPolicyEvaluations=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_policy_evaluations",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPolicyEvaluations=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_policy_evaluations",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPrivateKey=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_private_key",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getSmartContractInterface=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_smart_contract_interface",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetSmartContractInterface=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_smart_contract_interface",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getUser=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_user",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetUser=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_user",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWallet=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_wallet",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWalletAccount=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/get_wallet_account",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWalletAccount=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/get_wallet_account",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getActivities=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_activities",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetActivities=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_activities",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPolicies=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_policies",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPolicies=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_policies",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.listPrivateKeyTags=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_private_key_tags",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampListPrivateKeyTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_private_key_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getPrivateKeys=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_private_keys",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetPrivateKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_private_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getSmartContractInterfaces=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_smart_contract_interfaces",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetSmartContractInterfaces=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_smart_contract_interfaces",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getSubOrgIds=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_suborgs",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetSubOrgIds=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_suborgs",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.listUserTags=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_user_tags",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampListUserTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_user_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getUsers=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_users",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getVerifiedSubOrgIds=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_verified_suborgs",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetVerifiedSubOrgIds=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_verified_suborgs",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWalletAccounts=async t=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_wallet_accounts",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWalletAccounts=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_wallet_accounts",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWallets=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/list_wallets",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWallets=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/list_wallets",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.getWhoami=async(t={})=>{let e=await F(x.Session);return e=At(e),this.request("/public/v1/query/whoami",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampGetWhoami=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/query/whoami",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.approveActivity=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.activityDecision("/public/v1/submit/approve_activity",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_APPROVE_ACTIVITY"})},this.stampApproveActivity=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/approve_activity",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createApiKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_api_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_API_KEYS_V2"},"createApiKeysResult")},this.stampCreateApiKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_api_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createApiOnlyUsers=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_api_only_users",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_API_ONLY_USERS"},"createApiOnlyUsersResult")},this.stampCreateApiOnlyUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_api_only_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createAuthenticators=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_authenticators",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_AUTHENTICATORS_V2"},"createAuthenticatorsResult")},this.stampCreateAuthenticators=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_authenticators",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createInvitations=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_invitations",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_INVITATIONS"},"createInvitationsResult")},this.stampCreateInvitations=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_invitations",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createOauthProviders=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_oauth_providers",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_OAUTH_PROVIDERS"},"createOauthProvidersResult")},this.stampCreateOauthProviders=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_oauth_providers",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPolicies=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_policies",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_POLICIES"},"createPoliciesResult")},this.stampCreatePolicies=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_policies",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPolicy=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_policy",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_POLICY_V3"},"createPolicyResult")},this.stampCreatePolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPrivateKeyTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_private_key_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_PRIVATE_KEY_TAG"},"createPrivateKeyTagResult")},this.stampCreatePrivateKeyTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_private_key_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createPrivateKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_private_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_PRIVATE_KEYS_V2"},"createPrivateKeysResultV2")},this.stampCreatePrivateKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_private_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createReadOnlySession=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_read_only_session",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_READ_ONLY_SESSION"},"createReadOnlySessionResult")},this.stampCreateReadOnlySession=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_read_only_session",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createReadWriteSession=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_read_write_session",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_READ_WRITE_SESSION_V2"},"createReadWriteSessionResultV2")},this.stampCreateReadWriteSession=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_read_write_session",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createSmartContractInterface=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_smart_contract_interface",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_SMART_CONTRACT_INTERFACE"},"createSmartContractInterfaceResult")},this.stampCreateSmartContractInterface=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_smart_contract_interface",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createSubOrganization=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_sub_organization",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_SUB_ORGANIZATION_V7"},"createSubOrganizationResultV7")},this.stampCreateSubOrganization=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_sub_organization",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createUserTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_user_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_USER_TAG"},"createUserTagResult")},this.stampCreateUserTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_user_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createUsers=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_users",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_USERS_V3"},"createUsersResult")},this.stampCreateUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_WALLET"},"createWalletResult")},this.stampCreateWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.createWalletAccounts=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/create_wallet_accounts",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_CREATE_WALLET_ACCOUNTS"},"createWalletAccountsResult")},this.stampCreateWalletAccounts=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/create_wallet_accounts",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteApiKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_api_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_API_KEYS"},"deleteApiKeysResult")},this.stampDeleteApiKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_api_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteAuthenticators=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_authenticators",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_AUTHENTICATORS"},"deleteAuthenticatorsResult")},this.stampDeleteAuthenticators=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_authenticators",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteInvitation=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_invitation",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_INVITATION"},"deleteInvitationResult")},this.stampDeleteInvitation=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_invitation",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteOauthProviders=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_oauth_providers",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_OAUTH_PROVIDERS"},"deleteOauthProvidersResult")},this.stampDeleteOauthProviders=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_oauth_providers",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deletePolicy=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_policy",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_POLICY"},"deletePolicyResult")},this.stampDeletePolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deletePrivateKeyTags=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_private_key_tags",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_PRIVATE_KEY_TAGS"},"deletePrivateKeyTagsResult")},this.stampDeletePrivateKeyTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_private_key_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deletePrivateKeys=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_private_keys",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_PRIVATE_KEYS"},"deletePrivateKeysResult")},this.stampDeletePrivateKeys=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_private_keys",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteSmartContractInterface=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_smart_contract_interface",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_SMART_CONTRACT_INTERFACE"},"deleteSmartContractInterfaceResult")},this.stampDeleteSmartContractInterface=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_smart_contract_interface",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteSubOrganization=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_sub_organization",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_SUB_ORGANIZATION"},"deleteSubOrganizationResult")},this.stampDeleteSubOrganization=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_sub_organization",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteUserTags=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_user_tags",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_USER_TAGS"},"deleteUserTagsResult")},this.stampDeleteUserTags=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_user_tags",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteUsers=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_users",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_USERS"},"deleteUsersResult")},this.stampDeleteUsers=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_users",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.deleteWallets=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/delete_wallets",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_DELETE_WALLETS"},"deleteWalletsResult")},this.stampDeleteWallets=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/delete_wallets",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.emailAuth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/email_auth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EMAIL_AUTH_V2"},"emailAuthResult")},this.stampEmailAuth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/email_auth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.exportPrivateKey=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/export_private_key",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_PRIVATE_KEY"},"exportPrivateKeyResult")},this.stampExportPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/export_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.exportWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/export_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET"},"exportWalletResult")},this.stampExportWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/export_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.exportWalletAccount=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/export_wallet_account",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_EXPORT_WALLET_ACCOUNT"},"exportWalletAccountResult")},this.stampExportWalletAccount=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/export_wallet_account",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.importPrivateKey=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/import_private_key",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_IMPORT_PRIVATE_KEY"},"importPrivateKeyResult")},this.stampImportPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/import_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.importWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/import_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_IMPORT_WALLET"},"importWalletResult")},this.stampImportWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/import_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initFiatOnRamp=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/init_fiat_on_ramp",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_FIAT_ON_RAMP"},"initFiatOnRampResult")},this.stampInitFiatOnRamp=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_fiat_on_ramp",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initImportPrivateKey=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/init_import_private_key",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_IMPORT_PRIVATE_KEY"},"initImportPrivateKeyResult")},this.stampInitImportPrivateKey=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_import_private_key",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initImportWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/init_import_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_IMPORT_WALLET"},"initImportWalletResult")},this.stampInitImportWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_import_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initOtp=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/init_otp",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_OTP"},"initOtpResult")},this.stampInitOtp=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_otp",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initOtpAuth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/init_otp_auth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_OTP_AUTH_V2"},"initOtpAuthResultV2")},this.stampInitOtpAuth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_otp_auth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.initUserEmailRecovery=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/init_user_email_recovery",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_INIT_USER_EMAIL_RECOVERY"},"initUserEmailRecoveryResult")},this.stampInitUserEmailRecovery=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/init_user_email_recovery",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.oauth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/oauth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OAUTH"},"oauthResult")},this.stampOauth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/oauth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.oauthLogin=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/oauth_login",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OAUTH_LOGIN"},"oauthLoginResult")},this.stampOauthLogin=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/oauth_login",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.otpAuth=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/otp_auth",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OTP_AUTH"},"otpAuthResult")},this.stampOtpAuth=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/otp_auth",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.otpLogin=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/otp_login",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_OTP_LOGIN"},"otpLoginResult")},this.stampOtpLogin=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/otp_login",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.recoverUser=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/recover_user",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_RECOVER_USER"},"recoverUserResult")},this.stampRecoverUser=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/recover_user",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.rejectActivity=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.activityDecision("/public/v1/submit/reject_activity",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_REJECT_ACTIVITY"})},this.stampRejectActivity=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/reject_activity",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.removeOrganizationFeature=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/remove_organization_feature",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_REMOVE_ORGANIZATION_FEATURE"},"removeOrganizationFeatureResult")},this.stampRemoveOrganizationFeature=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/remove_organization_feature",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.setOrganizationFeature=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/set_organization_feature",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SET_ORGANIZATION_FEATURE"},"setOrganizationFeatureResult")},this.stampSetOrganizationFeature=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/set_organization_feature",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.signRawPayload=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/sign_raw_payload",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOAD_V2"},"signRawPayloadResult")},this.stampSignRawPayload=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/sign_raw_payload",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.signRawPayloads=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/sign_raw_payloads",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SIGN_RAW_PAYLOADS"},"signRawPayloadsResult")},this.stampSignRawPayloads=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/sign_raw_payloads",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.signTransaction=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/sign_transaction",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_SIGN_TRANSACTION_V2"},"signTransactionResult")},this.stampSignTransaction=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/sign_transaction",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.stampLogin=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/stamp_login",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_STAMP_LOGIN"},"stampLoginResult")},this.stampStampLogin=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/stamp_login",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updatePolicy=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_policy",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_POLICY_V2"},"updatePolicyResultV2")},this.stampUpdatePolicy=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_policy",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updatePrivateKeyTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_private_key_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_PRIVATE_KEY_TAG"},"updatePrivateKeyTagResult")},this.stampUpdatePrivateKeyTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_private_key_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateRootQuorum=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_root_quorum",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_ROOT_QUORUM"},"updateRootQuorumResult")},this.stampUpdateRootQuorum=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_root_quorum",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUser=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_user",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER"},"updateUserResult")},this.stampUpdateUser=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserEmail=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_user_email",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_EMAIL"},"updateUserEmailResult")},this.stampUpdateUserEmail=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_email",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserName=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_user_name",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_NAME"},"updateUserNameResult")},this.stampUpdateUserName=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_name",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserPhoneNumber=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_user_phone_number",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_PHONE_NUMBER"},"updateUserPhoneNumberResult")},this.stampUpdateUserPhoneNumber=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_phone_number",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateUserTag=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_user_tag",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_USER_TAG"},"updateUserTagResult")},this.stampUpdateUserTag=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_user_tag",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.updateWallet=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/update_wallet",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_UPDATE_WALLET"},"updateWalletResult")},this.stampUpdateWallet=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/update_wallet",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.verifyOtp=async t=>{const{organizationId:e,timestampMs:i,...r}=t;let n=await F(x.Session);return n=At(n),this.command("/public/v1/submit/verify_otp",{parameters:r,organizationId:e??n?.organizationId??this.config.organizationId,timestampMs:i??String(Date.now()),type:"ACTIVITY_TYPE_VERIFY_OTP"},"verifyOtpResult")},this.stampVerifyOtp=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/public/v1/submit/verify_otp",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.testRateLimits=async t=>{let e=await F(x.Session);return e=At(e),this.request("/tkhq/api/v1/test_rate_limits",{...t,organizationId:t.organizationId??e?.organizationId??this.config.organizationId})},this.stampTestRateLimits=async t=>{if(!this.stamper)return;const e=this.config.apiBaseUrl+"/tkhq/api/v1/test_rate_limits",i=JSON.stringify(t);return{body:i,stamp:await this.stamper.stamp(i),url:e}},this.config=t,t.stamper&&(this.stamper=t.stamper)}async request(t,e){const i=this.config.apiBaseUrl+t,r=JSON.stringify(e);var n={"X-Client-Version":Z};if(this.stamper){const t=await this.stamper.stamp(r);n[t.stampHeaderName]=t.stampHeaderValue}this.config.readOnlySession&&(n["X-Session"]=this.config.readOnlySession);const s=await fetch(i,{method:"POST",headers:n,body:r,redirect:"follow"});if(!s.ok){let t;try{t=await s.json()}catch(t){throw new Error(`${s.status} ${s.statusText}`)}throw new L(t)}return await s.json()}async command(t,e,i){const r=this.config.activityPoller?.intervalMs??1e3,n=this.config.activityPoller?.numRetries??3,s=t=>{const{result:e,status:r}=t.activity;return"ACTIVITY_STATUS_COMPLETED"===r?{...e[`${i}`],...t}:t};let a=0;const o=async t=>{const e={activityId:t},i=await this.getActivity(e);return a>n?s(i):(a+=1,f.includes(i.activity.status)?s(i):(await(u=r,new Promise(t=>setTimeout(t,u))),o(t)));var u},u=await this.request(t,e);return f.includes(u.activity.status)?s(u):o(u.activity.id)}async activityDecision(t,e){const i=await this.request(t,e);return{...i.activity.result,...i}}}class vt extends Tt{constructor(t,e){super(t),this.authClient=e}}const St="900";class Rt extends vt{constructor(t,e){super(t,e),this.login=async t=>{const e=await this.createReadOnlySession(t||{}),i={sessionType:W.READ_ONLY,userId:e.userId,organizationId:e.organizationId,expiry:Number(e.sessionExpiry),token:e.session};return await J(i,this.authClient),e},this.refreshSession=async({sessionType:t=W.READ_WRITE,expirationSeconds:e=St,invalidateExisting:i=!1,publicKey:r}={})=>{try{switch(t){case W.READ_ONLY:{if(!(this instanceof Ot))throw new Error("You must use a passkey client to refresh a read-only session.");const t=await this.createReadOnlySession({}),e={sessionType:W.READ_ONLY,userId:t.userId,organizationId:t.organizationId,expiry:Number(t.sessionExpiry),token:t.session};return void await J(e,M.Passkey)}case W.READ_WRITE:if(this instanceof Nt){let t,n=r;if(!r){t=await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"]);const e=new Uint8Array(await crypto.subtle.exportKey("raw",t.publicKey));n=(0,z.pD)((0,z.JD)(e))}const s=await this.stampLogin({publicKey:n,expirationSeconds:e,invalidateExisting:i});return await this.resetKeyPair(t),void await J(s.session,M.IndexedDb)}if(this instanceof Ut){const t=r??await this.getEmbeddedPublicKey();if(!t)throw new Error("Unable to refresh session: missing target public key.");const n=await this.createReadWriteSession({targetPublicKey:t,expirationSeconds:e,invalidateExisting:i}),s={sessionType:W.READ_WRITE,userId:n.userId,organizationId:n.organizationId,expiry:Date.now()+1e3*Number(e),token:n.credentialBundle};return await this.injectCredentialBundle(s.token),void await J(s,M.Iframe)}throw new Error("Unsupported client type for read-write session refresh.");default:throw new Error(`Invalid session type passed: ${t}`)}}catch(t){throw new Error(`Unable to refresh session: ${t}`)}},this.loginWithBundle=async t=>{const{bundle:e,expirationSeconds:i=St}=t;if(!(this instanceof Ut))throw new Error("You must use an iframe client to log in with a session.");await this.injectCredentialBundle(e);const r=await this.getWhoami(),n={sessionType:W.READ_WRITE,userId:r.userId,organizationId:r.organizationId,expiry:Date.now()+1e3*Number(i),token:e};await J(n,M.Iframe)},this.loginWithSession=async t=>{if(!(this instanceof Nt))throw new Error("You must use an indexedDb client to log in with a session.");await J(t,M.IndexedDb)},this.loginWithPasskey=async t=>{try{const{publicKey:e,organizationId:i,sessionType:r=W.READ_WRITE,expirationSeconds:n=St}=t;if(r===W.READ_ONLY){const t=await this.createReadOnlySession({}),e={sessionType:W.READ_ONLY,userId:t.userId,organizationId:t.organizationId,expiry:Number(t.sessionExpiry),token:t.session};await J(e,M.Passkey)}else{if(r!==W.READ_WRITE)throw new Error(`Invalid session type passed: ${r}`);{if(!e)throw new Error("You must provide a publicKey to create a passkey read write session.");const t=await this.stampLogin({publicKey:e,expirationSeconds:n,...i&&{organizationId:i}});await J(t.session,M.IndexedDb)}}}catch(t){throw new Error(`Unable to log in with the provided passkey: ${t}`)}},this.loginWithWallet=async t=>{try{const{publicKey:e,organizationId:i,sessionType:r=W.READ_WRITE,expirationSeconds:n=St}=t;if(r===W.READ_ONLY){const t=await this.createReadOnlySession({}),e={sessionType:W.READ_ONLY,userId:t.userId,organizationId:t.organizationId,expiry:Number(t.sessionExpiry),token:t.session};await J(e,M.Wallet)}else{if(r!==W.READ_WRITE)throw new Error(`Invalid session type passed: ${r}`);{if(!e)throw new Error("You must provide a publicKey to create a read-write session.");const t=await this.stampLogin({publicKey:e,expirationSeconds:n,...i&&{organizationId:i}});await J(t.session,M.IndexedDb)}}}catch(t){throw new Error(`Unable to log in with the provided wallet: ${t}`)}},this.deleteUserAuth=async t=>{try{const{userId:e,phoneNumber:i,email:r,authenticatorIds:n,oauthProviderIds:s,apiKeyIds:a}=t,o=[];return i&&o.push(this.updateUser({userId:e,userPhoneNumber:"",userTagIds:[]})),r&&o.push(this.updateUser({userId:e,userEmail:"",userTagIds:[]})),n&&n.length>0&&o.push(this.deleteAuthenticators({userId:e,authenticatorIds:n})),s&&s.length>0&&o.push(this.deleteOauthProviders({userId:e,providerIds:s})),a&&a.length>0&&o.push(this.deleteApiKeys({userId:e,apiKeyIds:a})),await Promise.all(o)}catch(t){throw t}},this.addUserAuth=async t=>{try{const{userId:e,phoneNumber:i,email:r,authenticators:n,oauthProviders:s,apiKeys:a}=t,o=[];return i&&o.push(this.updateUser({userId:e,userPhoneNumber:i,userTagIds:[]})),r&&o.push(this.updateUser({userId:e,userEmail:r,userTagIds:[]})),n&&n.length>0&&o.push(this.createAuthenticators({userId:e,authenticators:n})),s&&s.length>0&&o.push(this.createOauthProviders({userId:e,oauthProviders:s})),a&&a.length>0&&o.push(this.createApiKeys({userId:e,apiKeys:a})),await Promise.all(o)}catch(t){throw t}}}async updateUserAuth(t){try{const{userId:e,phoneNumber:i,email:r,authenticators:n,oauthProviders:s,apiKeys:a}=t,o=[],u={};return void 0!==i&&(u.userPhoneNumber=null===i?"":i),void 0!==r&&(u.userEmail=null===r?"":r),Object.keys(u).length>0&&o.push(this.updateUser({userId:e,...u,userTagIds:[]})),n&&(n.add?.length&&o.push(this.createAuthenticators({userId:e,authenticators:n.add})),n.deleteIds?.length&&o.push(this.deleteAuthenticators({userId:e,authenticatorIds:n.deleteIds}))),s&&(s.add?.length&&o.push(this.createOauthProviders({userId:e,oauthProviders:s.add})),s.deleteIds?.length&&o.push(this.deleteOauthProviders({userId:e,providerIds:s.deleteIds}))),a&&(a.add?.length&&o.push(this.createApiKeys({userId:e,apiKeys:a.add})),a.deleteIds?.length&&o.push(this.deleteApiKeys({userId:e,apiKeyIds:a.deleteIds}))),await Promise.all(o),!0}catch(t){throw t}}}class Ot extends Rt{constructor(t){super(t,M.Passkey),this.createUserPasskey=async(t={})=>{const e=It(),i=Et(e),r=It(),n={publicKey:{rp:{id:t.publicKey?.rp?.id??this.rpId,name:t.publicKey?.rp?.name??""},challenge:t.publicKey?.challenge??e,pubKeyCredParams:t.publicKey?.pubKeyCredParams??[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],user:{id:t.publicKey?.user?.id??r,name:t.publicKey?.user?.name??"Default User",displayName:t.publicKey?.user?.displayName??"Default User"},authenticatorSelection:{authenticatorAttachment:t.publicKey?.authenticatorSelection?.authenticatorAttachment??void 0,requireResidentKey:t.publicKey?.authenticatorSelection?.requireResidentKey??!0,residentKey:t.publicKey?.authenticatorSelection?.residentKey??"required",userVerification:t.publicKey?.authenticatorSelection?.userVerification??"preferred"}}},s=await p(n);return{encodedChallenge:t.publicKey?.challenge?Et(t.publicKey?.challenge):i,attestation:s}},this.rpId=this.stamper.rpId}}class Ut extends Rt{constructor(t){super(t,M.Iframe),this.injectCredentialBundle=async t=>await this.stamper.injectCredentialBundle(t),this.injectWalletExportBundle=async(t,e)=>await this.stamper.injectWalletExportBundle(t,e),this.injectKeyExportBundle=async(t,e,i)=>await this.stamper.injectKeyExportBundle(t,e,i),this.injectImportBundle=async(t,e,i)=>await this.stamper.injectImportBundle(t,e,i),this.extractWalletEncryptedBundle=async()=>await this.stamper.extractWalletEncryptedBundle(),this.extractKeyEncryptedBundle=async t=>await this.stamper.extractKeyEncryptedBundle(t),this.getEmbeddedPublicKey=async()=>await this.stamper.getEmbeddedPublicKey(),this.clearEmbeddedKey=async()=>await this.stamper.clearEmbeddedKey(),this.initEmbeddedKey=async()=>await this.stamper.initEmbeddedKey(),this.iframePublicKey=this.stamper.iframePublicKey}}class Pt extends Rt{constructor(t){super(t,M.Wallet),this.wallet=t.wallet}async getPublicKey(){return this.wallet.getPublicKey()}getWalletInterface(){return this.wallet}}class Nt extends Rt{constructor(t){super(t,M.IndexedDb),this.clear=async()=>await this.stamper.clear(),this.getPublicKey=async()=>await this.stamper.getPublicKey(),this.init=async()=>await this.stamper.init(),this.resetKeyPair=async t=>await this.stamper.resetKeyPair(t)}}const Ct="KeyStore",zt="turnkeyKeyPair";function Bt(t){let e=0;for(;e<t.length&&0==t[e];)e++;e==t.length&&(e=t.length-1);let i=0;128&~t[e]||(i=1);const r=new Uint8Array(t.length-e+i);return r.set(t.subarray(e),i),r}class Dt{constructor(){if(this.publicKeyHex=null,this.privateKey=null,"undefined"==typeof window)throw new Error("IndexedDB is only available in the browser")}async openDb(){return new Promise((t,e)=>{const i=indexedDB.open("TurnkeyStamperDB",1);i.onupgradeneeded=t=>{t.target.result.createObjectStore(Ct)},i.onsuccess=()=>t(i.result),i.onerror=()=>e(i.error)})}async storeKeyPair(t,e){const i=await this.openDb();return new Promise((r,n)=>{const s=i.transaction(Ct,"readwrite"),a=s.objectStore(Ct);a.put(t,`${zt}-pub`),a.put(e,`${zt}-priv`),s.oncomplete=()=>{i.close(),r()},s.onerror=()=>n(s.error),s.onabort=()=>n(s.error)})}async getStoredKeys(){const t=await this.openDb();return new Promise((e,i)=>{const r=t.transaction(Ct,"readonly"),n=r.objectStore(Ct),s=n.get(`${zt}-pub`),a=n.get(`${zt}-priv`);let o=null,u=null;s.onsuccess=()=>o=s.result||null,a.onsuccess=()=>u=a.result||null,r.oncomplete=()=>{t.close(),e({publicKey:o,privateKey:u})},r.onerror=()=>i(r.error)})}async init(){const{publicKey:t,privateKey:e}=await this.getStoredKeys();t&&e?(this.publicKeyHex=t,this.privateKey=e):await this.resetKeyPair()}async resetKeyPair(t){let e,i;if(t){if(!1!==t.privateKey.extractable)throw new Error("Provided privateKey must be non-extractable.");e=t.privateKey,i=t.publicKey}else{const t=await crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign","verify"]);e=t.privateKey,i=t.publicKey}const r=new Uint8Array(await crypto.subtle.exportKey("raw",i)),n=(0,z.JD)(r),s=(0,z.pD)(n);await this.storeKeyPair(s,e),this.publicKeyHex=s,this.privateKey=e}getPublicKey(){return this.publicKeyHex}async sign(t){if(!this.privateKey)throw new Error("Key not initialized. Call init() first.");const e=(new TextEncoder).encode(t),i=await crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},this.privateKey,e),r=function(t){if(t.length%2!=0||0==t.length||t.length>132)throw new Error("Invalid IEEE P1363 signature encoding. Length: "+t.length);const e=Bt(t.subarray(0,t.length/2)),i=Bt(t.subarray(t.length/2,t.length));let r=0;const n=2+e.length+1+1+i.length;let s;return n>=128?(s=new Uint8Array(n+3),s[r++]=48,s[r++]=129,s[r++]=n):(s=new Uint8Array(n+2),s[r++]=48,s[r++]=n),s[r++]=2,s[r++]=e.length,s.set(e,r),r+=e.length,s[r++]=2,s[r++]=i.length,s.set(i,r),s}(new Uint8Array(i));return(0,z.pD)(r)}async stamp(t){if(!this.publicKeyHex||!this.privateKey)throw new Error("Key not initialized. Call init() first.");const e=await this.sign(t),i={publicKey:this.publicKeyHex,scheme:"SIGNATURE_SCHEME_TK_API_P256",signature:e};return{stampHeaderName:"X-Stamp",stampHeaderValue:(0,z.up)(JSON.stringify(i))}}async clear(){const t=await this.openDb();return new Promise((e,i)=>{const r=t.transaction(Ct,"readwrite"),n=r.objectStore(Ct);n.delete(`${zt}-pub`),n.delete(`${zt}-priv`),r.oncomplete=()=>{t.close(),this.publicKeyHex=null,this.privateKey=null,e()},r.onerror=()=>i(r.error)})}}window.TurnkeySDK={Turnkey:class{constructor(t){this.passkeyClient=t=>{const e=t?.rpId??this.config.rpId??K.location.hostname;if(!e)throw new Error("Tried to initialize a passkey client with no rpId defined");return this.stamper=new N({rpId:e,...void 0!==t?.timeout&&{timeout:t?.timeout},...void 0!==t?.userVerification&&{userVerification:t?.userVerification},...void 0!==t?.allowCredentials&&{allowCredentials:t?.allowCredentials}}),new Ot({stamper:this.stamper,apiBaseUrl:this.config.apiBaseUrl,organizationId:this.config.defaultOrganizationId})},this.iframeClient=async t=>{if(!t.iframeUrl)throw new Error("Tried to initialize iframeClient with no iframeUrl defined");const e=t.iframeElementId??"turnkey-default-iframe-element-id";return this.stamper=new m({iframeContainer:t.iframeContainer,iframeUrl:t.iframeUrl,iframeElementId:e}),await this.stamper.init(t.dangerouslyOverrideIframeKeyTtl??void 0),new Ut({stamper:this.stamper,apiBaseUrl:this.config.apiBaseUrl,organizationId:this.config.defaultOrganizationId})},this.walletClient=t=>new Pt({stamper:new B(t),wallet:t,apiBaseUrl:this.config.apiBaseUrl,organizationId:this.config.defaultOrganizationId}),this.indexedDbClient=async()=>(this.stamper=new Dt,new Nt({stamper:this.stamper,apiBaseUrl:this.config.apiBaseUrl,organizationId:this.config.defaultOrganizationId})),this.serverSign=async(t,e,i)=>{const r=i??this.config.serverSignUrl;if(!r)throw new Error("Tried to call serverSign with no serverSignUrl defined");const n=JSON.stringify({methodName:t,params:e}),s=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Client-Version":Z},body:n,redirect:"follow"});if(!s.ok){let t;try{t=await s.json()}catch(t){throw new Error(`${s.status} ${s.statusText}`)}throw new L(t)}return await s.json()},this.getSession=async()=>{const t=await F(x.Session);let e;if(e="string"==typeof t?At(t):t,e&&1e3*e.expiry>Date.now())return e;await H(x.Session)},this.getRawSession=async()=>{const t=await F(x.Session);let e;if("string"==typeof t){if(e=At(t),e&&1e3*e.expiry>Date.now())return t}else if(t&&1e3*t.expiry>Date.now())return JSON.stringify(t);await H(x.Session)},this.logout=async()=>(await H(x.Client),await H(x.Session),!0),this.config=t}}},console.log("Turnkey SDK bundled and ready for Chrome extension")})(),window.TurnkeySDK={}})();